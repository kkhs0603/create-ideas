{"ast":null,"code":"var _jsxFileName = \"/Users/kakehashishunsuke/create-ideas/src/pages/CanvasList.js\";\nvar __jsx = React.createElement;\nimport React, { useContext } from \"react\";\nimport { CanvasContext } from \"../contexts/CanvasContext\";\nimport Layout from \"../components/templates/Layout/Layout\";\nimport CreateCanvas from \"../components/organisms/CreateCanvas\";\nimport SelectCanvas from \"../components/organisms/SelectCanvas\";\nimport firebase from \"../firebase/firebase\";\nexport async function getServerSideProps() {\n  const db = firebase.firestore();\n  const canvases = [];\n  const result = await new Promise(async (resolve, reject) => {\n    try {\n      const canvasesRef = await db.collection(\"canvases\");\n      canvasesRef.onSnapshot(snapshot => {\n        snapshot.docChanges().forEach(change => {\n          console.log(change);\n          canvases.push({\n            id: change.doc.id,\n            name: change.doc.data().name,\n            created_by: change.doc.data().created_by,\n            created_at: change.doc.data().created_at.toDate()\n          });\n        });\n        resolve(JSON.stringify(canvases));\n      });\n    } catch (error) {\n      reject([]);\n    }\n  });\n  return {\n    props: {\n      canvases: result\n    }\n  };\n}\n\nconst CanvasListPage = ({\n  canvases\n}) => {\n  const canvasesObj = JSON.parse(canvases);\n  console.log(\"canvases\", canvasesObj);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, __jsx(CreateCanvas, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Canvas\\u4E00\\u89A7\"), __jsx(SelectCanvas, {\n    canvases: canvasesObj,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CanvasListPage;","map":{"version":3,"sources":["/Users/kakehashishunsuke/create-ideas/src/pages/CanvasList.js"],"names":["React","useContext","CanvasContext","Layout","CreateCanvas","SelectCanvas","firebase","getServerSideProps","db","firestore","canvases","result","Promise","resolve","reject","canvasesRef","collection","onSnapshot","snapshot","docChanges","forEach","change","console","log","push","id","doc","name","data","created_by","created_at","toDate","JSON","stringify","error","props","CanvasListPage","canvasesObj","parse"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AAEA,OAAO,eAAeC,kBAAf,GAAoC;AACzC,QAAMC,EAAE,GAAGF,QAAQ,CAACG,SAAT,EAAX;AACA,QAAMC,QAAQ,GAAG,EAAjB;AACA,QAAMC,MAAM,GAAG,MAAM,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AAC1D,QAAI;AACF,YAAMC,WAAW,GAAG,MAAMP,EAAE,CAACQ,UAAH,CAAc,UAAd,CAA1B;AACAD,MAAAA,WAAW,CAACE,UAAZ,CAAwBC,QAAD,IAAc;AACnCA,QAAAA,QAAQ,CAACC,UAAT,GAAsBC,OAAtB,CAA+BC,MAAD,IAAY;AACxCC,UAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAX,UAAAA,QAAQ,CAACc,IAAT,CAAc;AACZC,YAAAA,EAAE,EAAEJ,MAAM,CAACK,GAAP,CAAWD,EADH;AAEZE,YAAAA,IAAI,EAAEN,MAAM,CAACK,GAAP,CAAWE,IAAX,GAAkBD,IAFZ;AAGZE,YAAAA,UAAU,EAAER,MAAM,CAACK,GAAP,CAAWE,IAAX,GAAkBC,UAHlB;AAIZC,YAAAA,UAAU,EAAET,MAAM,CAACK,GAAP,CAAWE,IAAX,GAAkBE,UAAlB,CAA6BC,MAA7B;AAJA,WAAd;AAMD,SARD;AASAlB,QAAAA,OAAO,CAACmB,IAAI,CAACC,SAAL,CAAevB,QAAf,CAAD,CAAP;AACD,OAXD;AAYD,KAdD,CAcE,OAAOwB,KAAP,EAAc;AACdpB,MAAAA,MAAM,CAAC,EAAD,CAAN;AACD;AACF,GAlBoB,CAArB;AAmBA,SAAO;AACLqB,IAAAA,KAAK,EAAE;AACLzB,MAAAA,QAAQ,EAAEC;AADL;AADF,GAAP;AAKD;;AAED,MAAMyB,cAAc,GAAG,CAAC;AAAE1B,EAAAA;AAAF,CAAD,KAAkB;AACvC,QAAM2B,WAAW,GAAGL,IAAI,CAACM,KAAL,CAAW5B,QAAX,CAApB;AACAY,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBc,WAAxB;AACA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,EAGE,MAAC,YAAD;AAAc,IAAA,QAAQ,EAAEA,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF;AAOD,CAVD;;AAYA,eAAeD,cAAf","sourcesContent":["import React, { useContext } from \"react\";\nimport { CanvasContext } from \"../contexts/CanvasContext\";\nimport Layout from \"../components/templates/Layout/Layout\";\nimport CreateCanvas from \"../components/organisms/CreateCanvas\";\nimport SelectCanvas from \"../components/organisms/SelectCanvas\";\nimport firebase from \"../firebase/firebase\";\n\nexport async function getServerSideProps() {\n  const db = firebase.firestore();\n  const canvases = [];\n  const result = await new Promise(async (resolve, reject) => {\n    try {\n      const canvasesRef = await db.collection(\"canvases\");\n      canvasesRef.onSnapshot((snapshot) => {\n        snapshot.docChanges().forEach((change) => {\n          console.log(change);\n          canvases.push({\n            id: change.doc.id,\n            name: change.doc.data().name,\n            created_by: change.doc.data().created_by,\n            created_at: change.doc.data().created_at.toDate(),\n          });\n        });\n        resolve(JSON.stringify(canvases));\n      });\n    } catch (error) {\n      reject([]);\n    }\n  });\n  return {\n    props: {\n      canvases: result,\n    },\n  };\n}\n\nconst CanvasListPage = ({ canvases }) => {\n  const canvasesObj = JSON.parse(canvases);\n  console.log(\"canvases\", canvasesObj);\n  return (\n    <Layout>\n      <CreateCanvas />\n      <div>Canvas一覧</div>\n      <SelectCanvas canvases={canvasesObj} />\n    </Layout>\n  );\n};\n\nexport default CanvasListPage;\n"]},"metadata":{},"sourceType":"module"}