{"ast":null,"code":"var _jsxFileName = \"/Users/kakehashishunsuke/create-ideas/src/pages/CanvasList.js\";\nvar __jsx = React.createElement;\nimport React, { useContext } from \"react\";\nimport { CanvasContext } from \"../contexts/CanvasContext\";\nimport Layout from \"../components/templates/Layout/Layout\";\nimport CreateCanvas from \"../components/organisms/CreateCanvas\";\nimport SelectCanvas from \"../components/organisms/SelectCanvas\";\nimport firebase from \"../firebase/firebase\";\nexport async function getServerSideProps() {\n  console.log(\"hoge\");\n  const canvases = [];\n  const db = firebase.firestore();\n  const result = await new Promise((resolve, reject) => {\n    const canvasesRef = db.collection(\"canvases\").get();\n  });\n  const canvasesRef = await db.collection(\"canvases\").get();\n  canvasesRef.onSnapshot(snapshot => {\n    snapshot.docChanges().forEach(change => {\n      console.log(change);\n      canvases.push({\n        id: change.doc.id,\n        name: change.doc.data().name,\n        created_by: change.doc.data().created_by,\n        created_at: change.doc.data().created_at\n      }); // 追加\n\n      if (change.type === \"added\") {// addLog(change.doc.id, change.doc.data());\n      } // 更新\n      else if (change.type === \"modified\") {// modLog(change.doc.id, change.doc.data());\n        } // 削除\n        else if (change.type === \"removed\") {// removeLog(change.doc.id);\n          }\n    });\n    return {\n      props: {\n        canvases\n      }\n    };\n  });\n  return {\n    props: {\n      canvases\n    }\n  };\n}\n\nconst CanvasListPage = ({\n  canvases\n}) => {\n  console.log(\"canvases\", canvases);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"Canvas\\u4E00\\u89A7\"), __jsx(SelectCanvas, {\n    canvases: canvases,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CanvasListPage;","map":{"version":3,"sources":["/Users/kakehashishunsuke/create-ideas/src/pages/CanvasList.js"],"names":["React","useContext","CanvasContext","Layout","CreateCanvas","SelectCanvas","firebase","getServerSideProps","console","log","canvases","db","firestore","result","Promise","resolve","reject","canvasesRef","collection","get","onSnapshot","snapshot","docChanges","forEach","change","push","id","doc","name","data","created_by","created_at","type","props","CanvasListPage"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AAEA,OAAO,eAAeC,kBAAf,GAAoC;AACzCC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,QAAMC,QAAQ,GAAG,EAAjB;AACA,QAAMC,EAAE,GAAGL,QAAQ,CAACM,SAAT,EAAX;AACA,QAAMC,MAAM,GAAG,MAAM,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpD,UAAMC,WAAW,GAAGN,EAAE,CAACO,UAAH,CAAc,UAAd,EAA0BC,GAA1B,EAApB;AACD,GAFoB,CAArB;AAGA,QAAMF,WAAW,GAAG,MAAMN,EAAE,CAACO,UAAH,CAAc,UAAd,EAA0BC,GAA1B,EAA1B;AACAF,EAAAA,WAAW,CAACG,UAAZ,CAAwBC,QAAD,IAAc;AACnCA,IAAAA,QAAQ,CAACC,UAAT,GAAsBC,OAAtB,CAA+BC,MAAD,IAAY;AACxChB,MAAAA,OAAO,CAACC,GAAR,CAAYe,MAAZ;AACAd,MAAAA,QAAQ,CAACe,IAAT,CAAc;AACZC,QAAAA,EAAE,EAAEF,MAAM,CAACG,GAAP,CAAWD,EADH;AAEZE,QAAAA,IAAI,EAAEJ,MAAM,CAACG,GAAP,CAAWE,IAAX,GAAkBD,IAFZ;AAGZE,QAAAA,UAAU,EAAEN,MAAM,CAACG,GAAP,CAAWE,IAAX,GAAkBC,UAHlB;AAIZC,QAAAA,UAAU,EAAEP,MAAM,CAACG,GAAP,CAAWE,IAAX,GAAkBE;AAJlB,OAAd,EAFwC,CAQxC;;AACA,UAAIP,MAAM,CAACQ,IAAP,KAAgB,OAApB,EAA6B,CAC3B;AACD,OAFD,CAGA;AAHA,WAIK,IAAIR,MAAM,CAACQ,IAAP,KAAgB,UAApB,EAAgC,CACnC;AACD,SAFI,CAGL;AAHK,aAIA,IAAIR,MAAM,CAACQ,IAAP,KAAgB,SAApB,EAA+B,CAClC;AACD;AACF,KApBD;AAqBA,WAAO;AACLC,MAAAA,KAAK,EAAE;AACLvB,QAAAA;AADK;AADF,KAAP;AAKD,GA3BD;AA4BA,SAAO;AACLuB,IAAAA,KAAK,EAAE;AACLvB,MAAAA;AADK;AADF,GAAP;AAKD;;AAED,MAAMwB,cAAc,GAAG,CAAC;AAAExB,EAAAA;AAAF,CAAD,KAAkB;AACvCF,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBC,QAAxB;AACA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,EAGE,MAAC,YAAD;AAAc,IAAA,QAAQ,EAAEA,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF;AAOD,CATD;;AAWA,eAAewB,cAAf","sourcesContent":["import React, { useContext } from \"react\";\nimport { CanvasContext } from \"../contexts/CanvasContext\";\nimport Layout from \"../components/templates/Layout/Layout\";\nimport CreateCanvas from \"../components/organisms/CreateCanvas\";\nimport SelectCanvas from \"../components/organisms/SelectCanvas\";\nimport firebase from \"../firebase/firebase\";\n\nexport async function getServerSideProps() {\n  console.log(\"hoge\");\n  const canvases = [];\n  const db = firebase.firestore();\n  const result = await new Promise((resolve, reject) => {\n    const canvasesRef = db.collection(\"canvases\").get();\n  });\n  const canvasesRef = await db.collection(\"canvases\").get();\n  canvasesRef.onSnapshot((snapshot) => {\n    snapshot.docChanges().forEach((change) => {\n      console.log(change);\n      canvases.push({\n        id: change.doc.id,\n        name: change.doc.data().name,\n        created_by: change.doc.data().created_by,\n        created_at: change.doc.data().created_at,\n      });\n      // 追加\n      if (change.type === \"added\") {\n        // addLog(change.doc.id, change.doc.data());\n      }\n      // 更新\n      else if (change.type === \"modified\") {\n        // modLog(change.doc.id, change.doc.data());\n      }\n      // 削除\n      else if (change.type === \"removed\") {\n        // removeLog(change.doc.id);\n      }\n    });\n    return {\n      props: {\n        canvases,\n      },\n    };\n  });\n  return {\n    props: {\n      canvases,\n    },\n  };\n}\n\nconst CanvasListPage = ({ canvases }) => {\n  console.log(\"canvases\", canvases);\n  return (\n    <Layout>\n      {/* <CreateCanvas /> */}\n      <div>Canvas一覧</div>\n      <SelectCanvas canvases={canvases} />\n    </Layout>\n  );\n};\n\nexport default CanvasListPage;\n"]},"metadata":{},"sourceType":"module"}